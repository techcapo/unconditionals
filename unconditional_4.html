<!doctype html>
<html>
    <head>
        <title>Unconditional #4</title>
    </head>
<body>

    <canvas id="love"></canvas>

    <script>
        var canvas = document.getElementById("love");
        var W = window.innerWidth;
        var r = '#cac800';
        var g = '#09f797';
        var b = '#635cff';

        var ctx = canvas.getContext("2d");
        var H = 13;
        var M = 16;
        canvas.width = Math.min(M * H * 2, W);
        canvas.height = Math.min(M * H, window.innerHeight);
        var S = Math.min(M, W / 2 / H - 1);
        var x = y = 0;

        var L = (window.location.hash ||
            "#" +
            "0000000000000" +
            "0001111111000" +
            "0011111111100" +
            "0011111111100" +
            "0111001001110" +
            "0110001000110" +
            "0110011100110" +
            "0011111111100" +
            "0011110111100" +
            "0000111110000" +
            "0000101010000" +
            "0000000000000" +
            "0000000000000").substr(1);

        function l(t) {
            var s = S;
            var a = Math.min(255, Math.max(0, Math.floor((Math.cos(t/1234) + 0.8)*0.7 * 256)));
            var o = Math.max(0, -Math.cos(t/3000)-0.5)*2
            ctx.fillStyle = b;
            ctx.fillRect(0, 0, S*H, S*H);
            ctx.fillStyle = r;
            ctx.fillRect(S*H, 0, S*H, S*H);
            function h(ox, oy, c) {
                c = c + (a < 16 ? "0" : "") + a.toString(16)
                for (var i = 0; i < H*H; ++i) {
                    var x = i % H;
                    var y = Math.floor(i / H);
                    ctx.fillStyle = L[i] == '1' ? g : c;
                    ctx.fillRect(ox + x * S + s / 4, oy + y * S + s / 4, s / 2, s / 2)
                }
            }
            h(0 + o * S*H/2, 0, r);
            h(S*H - o * S*H/2, 0, b);
            window.requestAnimationFrame(l);
        }
        l(0);
    </script>
</body>
</html>